<section>
    <div class="admin-wrapper-main__card">
        <h2 class="admin-wrapper-main__card--title">Create a channel</h2>
        <p class="admin-wrapper-main__card--contents">channels can be made up from components as well as other channels (remember
            these have their own timings)</p>
        <form [formGroup]="form" novalidate (ngSubmit)="save(form)" class="admin-wrapper-main__card--form">
            <div class="admin-wrapper-main__card--form-group">
                <label>Channel name:
                    <span class="admin-wrapper-main__card--form--tooltip">
                        <span>&#9432;</span>
                        <div class="admin-wrapper-main__card--form--tooltiptext">
                            a easy to identify name
                        </div>
                    </span>
                </label>
                <input type="text" formControlName="channel" class="admin-wrapper-main__card--form-input">
                <div *ngIf="f.channel.touched && f.channel.errors" class="admin-wrapper-main__card--form-error">
                    <div *ngIf="f.channel.errors.required"> A Channel name is required</div>
                    <div *ngIf="f.channel.errors.minlength"> The channel name has to be atleast 5 characters long</div>
                </div>
                <!--{{f.channel.errors |json}}-->
            </div>
            <!--paths-->
            <div formArrayName="path">
                <div *ngFor="let path of f.path['controls']; let i=index">
                    <div>
                        <span>path {{i + 1}}</span>
                        <span *ngIf="f.path.controls.length > 1" (click)="removePath(i)"></span>
                    </div>
                    <div [formGroupName]="i">
                        <div class="admin-wrapper-main__card--form-group">
                            <label>path url:
                                <span class="admin-wrapper-main__card--form--tooltip">
                                    &#9432;
                                    <div class="admin-wrapper-main__card--form--tooltiptext">
                                        requires a relative url to a component simply pick a component from the right and add its name after the second '/'
                                    </div>
                                </span>
                            </label>
                            <input formControlName="pathurl" class="admin-wrapper-main__card--form-input" />
                            <div *ngIf="f.path['controls'][i].controls.pathurl.touched && f.path['controls'][i].controls.pathurl.errors" class="admin-wrapper-main__card--form-error">
                                <div *ngIf="f.path['controls'][i].controls.pathurl.errors.required"> A Channel name is required</div>
                                <div *ngIf="f.path['controls'][i].controls.pathurl.errors.minlength"> The channel name has to be atleast 20 characters long</div>
                            </div>
                           <!--{{f.path['controls'][i].controls.pathurl.errors |json}}-->
                        </div>
                        <div class="admin-wrapper-main__card--form-group">
                            <label>description:
                                <span class="admin-wrapper-main__card--form--tooltip">
                                    &#9432;
                                    <div class="admin-wrapper-main__card--form--tooltiptext">
                                        describe the component you chose
                                    </div>
                                </span>
                            </label>
                            <input type="text" formControlName="description" value="Does this and that" class="admin-wrapper-main__card--form-input"/>
                            <div *ngIf="f.path['controls'][i].controls.description.touched && f.path['controls'][i].controls.description.errors" class="admin-wrapper-main__card--form-error">
                                <div *ngIf="f.path['controls'][i].controls.description.errors.required"> A Channel name is required</div>
                                <div *ngIf="f.path['controls'][i].controls.description.errors.minlength"> The path description has to be atleast 20
                                    characters long</div>
                            </div>
                        </div>
                        <div class="admin-wrapper-main__card--form-group">
                            <label>delay:
                                <span class="admin-wrapper-main__card--form--tooltip">
                                    &#9432;
                                    <div class="admin-wrapper-main__card--form--tooltiptext">
                                        this is the time the component is shown in ticks (1000=second)
                                    </div>
                                </span>
                            </label>
                            <input type="number" formControlName="delay" class="admin-wrapper-main__card--form-input">
                        </div>
                        <div class="admin-wrapper-main__card--form-group">
                            <label>component name:
                                <span class="admin-wrapper-main__card--form--tooltip">
                                    &#9432;
                                    <div class="admin-wrapper-main__card--form--tooltiptext">
                                        allows you to customize the default name
                                    </div>
                                </span>
                            </label>
                            <input type="text" formControlName="componentName" class="admin-wrapper-main__card--form-input">
                            <div *ngIf="f.path['controls'][i].controls.componentName.touched && f.path['controls'][i].controls.componentName.errors"
                                class="admin-wrapper-main__card--form-error">
                                <div *ngIf="f.path['controls'][i].controls.componentName.errors.required"> A Channel name is required</div>
                                <div *ngIf="f.path['controls'][i].controls.componentName.errors.minlength"> The path description has to be atleast 20
                                    characters long</div>
                            </div>
                        </div>
                        <br>
                        <a (click)="removePath(i)">
                            <input type="button" class="button warning" value="removePath">
                        </a>
                    </div>
                    <br>
                </div>
            </div>
            <div>
                <a (click)="addPath()">
                    <input class="button succes" type="button" value="Add route">
                </a>
            </div>
            <br>
            <div>
                {{form.status}}
                <button class="button succes" type="submit" [disabled]="!form.valid">Create</button>
            </div>
        </form>
    </div>
    <!-- lists available components-->
    <app-listing-components></app-listing-components>
</section>