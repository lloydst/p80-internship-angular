<section>
    <div class="admin-wrapper-main__card--fullwidth">
        <h2 class="admin-wrapper-main__card--title">Edit channel</h2>
        <form [formGroup]="form" (ngSubmit)="save(form)" class="admin-wrapper-main__card--form" #top>
            <div class="admin-wrapper-main__card--form-group">
                <label>Channel: </label>
                <input style="border:none" formControlName="channel" readonly="readonly">

            </div>
            <div formArrayName="path">
                <div *ngFor="let paths of path.controls; let i=index" [formGroupName]="i">
                    <!-- path template -->
                    <h4>path #{{i + 1}}</h4>
                    <div>

                        <div class="admin-wrapper-main__card--form-group">
                            <label>Url:
                                <span class="admin-wrapper-main__card--form--tooltip">
                                    &#9432;
                                    <div class="admin-wrapper-main__card--form--tooltiptext">
                                        the current paths relative url to the selected component
                                    </div>
                                </span>
                            </label><br>
                            <input type="text" formControlName="pathurl" class="admin-wrapper-main__card--form-input">
                            <div *ngIf="f.path['controls'][i].controls.pathurl.touched && f.path['controls'][i].controls.pathurl.errors"
                                class="admin-wrapper-main__card--form-error">
                                <div *ngIf="f.path['controls'][i].controls.pathurl.errors.required"> A Channel name is
                                    required</div>
                                <div *ngIf="f.path['controls'][i].controls.pathurl.errors.minlength"> The channel name
                                    has to be atleast 20
                                    characters long</div>
                            </div>
                        </div>

                        <div class="admin-wrapper-main__card--form-group">
                            <label>Name:
                                <span class="admin-wrapper-main__card--form--tooltip">
                                    &#9432;
                                    <div class="admin-wrapper-main__card--form--tooltiptext">
                                        custom set name
                                    </div>
                                </span>
                            </label>
                            <input type="text" formControlName="componentName" class="admin-wrapper-main__card--form-input">
                            <div *ngIf="f.path['controls'][i].controls.componentName.touched && f.path['controls'][i].controls.componentName.errors"
                                class="admin-wrapper-main__card--form-error">
                                <div *ngIf="f.path['controls'][i].controls.componentName.errors.required"> A Channel
                                    name is required</div>
                                <div *ngIf="f.path['controls'][i].controls.componentName.errors.minlength"> The path
                                    description has to be atleast
                                    20
                                    characters long</div>
                            </div>
                        </div>
                        <div class="admin-wrapper-main__card--form-group">
                            <label>Description:
                                <span class="admin-wrapper-main__card--form--tooltip">
                                    &#9432;
                                    <div class="admin-wrapper-main__card--form--tooltiptext">
                                        a description of what the component does
                                    </div>
                                </span>
                            </label>
                            <textarea formControlName="description" class="admin-wrapper-main__card--form-input"></textarea>
                            <div *ngIf="f.path['controls'][i].controls.description.touched && f.path['controls'][i].controls.description.errors"
                                class="admin-wrapper-main__card--form-error">
                                <div *ngIf="f.path['controls'][i].controls.description.errors.required"> A Channel name
                                    is required</div>
                                <div *ngIf="f.path['controls'][i].controls.description.errors.minlength"> The path
                                    description has to be atleast 20
                                    characters long</div>
                            </div>
                        </div>
                        <div class="admin-wrapper-main__card--form-group">
                            <label>Delay:
                                <span class="admin-wrapper-main__card--form--tooltip">
                                    &#9432;
                                    <div class="admin-wrapper-main__card--form--tooltiptext">
                                        time it takes in ticks to move to the next path
                                    </div>
                                </span>
                            </label>
                            <input #delay type="number" formControlName="delay" class="admin-wrapper-main__card--form-input">
                            <div *ngIf="f.path['controls'][i].controls.delay.touched && f.path['controls'][i].controls.delay.errors"
                                class="admin-wrapper-main__card--form-error">
                                <div *ngIf="f.path['controls'][i].controls.delay.errors.required"> A Delay name is
                                    required</div>
                                <div *ngIf="f.path['controls'][i].controls.delay.errors.min"> The delay has to be
                                    atleast 5000 (5seconds)
                                    20
                                    characters long</div>
                            </div>
                            <small>{{delay.value / 1000 | number}} seconds</small>
                        </div>
                    </div>
                    <br>
                    <button class="button succes" type="submit" (click)="addPath()">Add path</button> &nbsp;
                    <button class="button danger" type="button danger" (click)="removePath(i)">Remove path</button>
                    <br>
                    <!-- End path template -->
                </div>
                <div>
                    <button class="button primary" type="submit" [disabled]="form.pristine" (click)="reloadPage()">Save</button>
                    &nbsp;
                    <button class="button danger" type="button danger" (click)="revert()" [disabled]="form.pristine">undo/reload</button>
                </div>
            </div>
        </form>
    </div>
    <!-- listing component gives information on how to use the routes-->
    <app-listing-components></app-listing-components>
</section>