<!-- Important! classes and id's are used in the ts file -->
<div class="admin-wrapper-main">
    <section>
        <div class="admin-wrapper-main__card">
            <h2 class="admin-wrapper-main__card--title">Create a Message here</h2>
            <form class="admin-wrapper-main__card--form" (ngSubmit)="create(message.value, showFrom.value, showTill.value, imgUrl.value, imgBoolean.checked, id.value); form.reset()"
                [formGroup]="form">
                <div class="admin-wrapper-main__card--form-group">
                    <label for="id">message name:
                        <span class="admin-wrapper-main__card--form--tooltip">
                            &#9432;
                            <div class="admin-wrapper-main__card--form--tooltiptext">
                                doubles as a title and identifier
                            </div>
                        </span>
                    </label>
                    <input class="admin-wrapper-main__card--form-input" #id type="text" name="identifier" formControlName="id" required>
                    <div *ngIf="form.get('id').touched">
                        <div *ngFor="let validation of form_validation_messages.id" class="admin-wrapper-main__card--form-error">
                            <div *ngIf="form.get('id').hasError(validation.type)">
                                {{validation.message}}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="admin-wrapper-main__card--form-group">
                    <label for="message">message:
                        <span class="admin-wrapper-main__card--form--tooltip">
                            &#9432;
                            <div class="admin-wrapper-main__card--form--tooltiptext">
                                the actual message
                            </div>
                        </span>
                    </label>
                    <br>
                    <input class="admin-wrapper-main__card--form-input" #message type="text" required formControlName="message">
                    <div *ngIf="form.get('message').touched">
                        <div *ngFor="let validation of form_validation_messages.message" class="admin-wrapper-main__card--form-error">
                            <div *ngIf="form.get('message').hasError(validation.type)">
                                {{validation.message}}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="admin-wrapper-main__card--form-group">
                    <label for="showFrom">zichtbaar van af:
                        <span class="admin-wrapper-main__card--form--tooltip">
                            &#9432;
                            <div class="admin-wrapper-main__card--form--tooltiptext">
                                the start date/time the message is visable
                            </div>
                        </span>
                    </label>
                    <input class="admin-wrapper-main__card--form-input" type="datetime-local" name="showFrom" #showFrom id="showFrom" required
                        formControlName="showFrom">
                        <div *ngIf="form.get('showFrom').touched">
                            <div *ngFor="let validation of form_validation_messages.showFrom" class="admin-wrapper-main__card--form-error">
                                <div *ngIf="form.get('showFrom').hasError(validation.type)">
                                    {{validation.message}}
                                </div>
                            </div>
                        </div>
                </div>
                <div class="admin-wrapper-main__card--form-group">
                    <label for="showTill">zichtbaar tot:
                        <span class="admin-wrapper-main__card--form--tooltip">
                            &#9432;
                            <div class="admin-wrapper-main__card--form--tooltiptext">
                                the end date/time the message is visable
                            </div>
                        </span>
                    </label>
                    <input class="admin-wrapper-main__card--form-input" type="datetime-local" name="showTill" #showTill id="showTill" required
                        formControlName="showTill">
                        <div *ngIf="form.get('showTill').touched">
                            <div *ngFor="let validation of form_validation_messages.showTill" class="admin-wrapper-main__card--form-error">
                                <div *ngIf="form.get('showTill').hasError(validation.type)">
                                    {{validation.message}}
                                </div>
                            </div>
                        </div>
                </div>
                <div class="admin-wrapper-main__card--form-group">
                    <label for="imgUrl">achtergrond img:
                        <span class="admin-wrapper-main__card--form--tooltip">
                            &#9432;
                            <div class="admin-wrapper-main__card--form--tooltiptext">
                                a optional background img
                            </div>
                        </span>
                    </label>
                    <input class="admin-wrapper-main__card--form-input" #imgUrl type="text" formControlName="imgUrl">
                    <div *ngIf="form.get('imgUrl').touched">
                        <div *ngFor="let validation of form_validation_messages.imgUrl" class="admin-wrapper-main__card--form-error">
                            <div *ngIf="form.get('imgUrl').hasError(validation.type)">
                                {{validation.message}}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="admin-wrapper-main__card--form-group">
                    <label for="imgBoolean">visable
                        <span class="admin-wrapper-main__card--form--tooltip">
                            &#9432;
                            <div class="admin-wrapper-main__card--form--tooltiptext">
                                manually setting the component to be visable
                            </div>
                        </span>
                    </label>
                    <input (click)="check(event)" #imgBoolean type="checkbox">
                </div>
                <button type="submit" class="button succes" [disabled]="!form.valid">Add</button>
            </form>
        </div>
        <div class="admin-wrapper-main__card--fullwidth" *ngIf="messages?.length > 0">
            <table>
                <thead class="admin-wrapper-main__card--title">
                    <th>identifier</th>
                    <th>Message</th>
                    <th>show (from-untill)</th>
                    <th>img url</th>
                    <th>visable</th>
                    <th>update</th>
                    <th>delete</th>
                </thead>
                <tr class="admin-wrapper-main__card--contents" *ngFor="let message of messages">
                    <td>{{message.identifier}}</td>
                    <td>{{message.message}}</td>
                    <td>{{message.showFrom.substring(8, 10)}}-{{message.showFrom.substring(5, 7)}}({{message.showFrom.substring(11,
                        16)}}) untill {{message.showTill.substring(8, 10)}}-{{message.showTill.substring(5, 7)}}({{message.showTill.substring(11,
                        16)}})
                    </td>
                    <td>{{message.imgLink}}</td>
                    <td>{{message.img}}</td>
                    <td>
                        <a [routerLink]='message.identifier'>
                            <button>update</button>
                        </a>
                    </td>
                    <td>
                        <button (click)="delete(message)">delete</button>
                    </td>
                </tr>
            </table>
        </div>
    </section>
</div>
<!-- available images-->
<app-image-view></app-image-view>